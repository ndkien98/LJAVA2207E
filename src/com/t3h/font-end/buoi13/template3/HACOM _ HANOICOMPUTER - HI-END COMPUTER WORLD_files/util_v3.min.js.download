function ChatState(){this.conversation_id="-1",this.conversation_code=null,this.chatting=!1,this.visitor_id=-1,this.visitor_name="",this.visitor_email="",this.visitor_phone="",this.agent_name=null,this.agent_group=null,this.service_id=-1,this.chat_windows_maximum=!1,this.isLike=!1,this.isDislike=!1,this.history=[],this.enableSound=!0,this.triggerState=[],this.replyFromTrigger=0,this.isSynced=!1,this.visitorAdditionField={},this.unreadCount=0,this.setBasicAttr=function(attr){this.conversation_id=attr.conversation_id,this.conversation_code=attr.conversation_code,this.chatting=attr.chatting,this.visitor_id=attr.visitor_id,this.visitor_name=attr.visitor_name,this.visitor_email=attr.visitor_email,this.visitor_phone=attr.visitor_phone,this.agent_name=attr.agent_name,this.agent_group=attr.agent_group,this.agent_avatar=attr.agent_avatar,this.service_id=attr.service_id,this.chat_windows_maximum=attr.chat_windows_maximum,this.isLike=attr.isLike,this.isDislike=attr.isDislike,this.history=attr.history,this.enableSound=attr.enableSound,this.triggerState=attr.triggerState,this.replyFromTrigger=attr.replyFromTrigger,this.isSynced=attr.isSynced,this.visitorAdditionField=attr.visitorAdditionField,this.unreadCount=attr.unreadCount},this.setDefaultAdditionFieldsValue=function(fields){for(var i=0;i<fields.length;i++)3==fields[i].type?this.visitorAdditionField[fields[i].users_field]=-1:this.visitorAdditionField[fields[i].users_field]=""},this.setAdditionFields=function(fields,values){for(var i=0;i<fields.length;i++)3==fields[i].type?this.visitorAdditionField[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:-1:this.visitorAdditionField[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:""}}function VisitorInfo(){this.visitorName="",this.visitorEmail="",this.visitor_phone="",this.setBasicInfo=function(name,email,phone){this.visitorName=null==name?"":name,this.visitorEmail=null==email?"":email,this.visitorPhone=null==phone?"":phone},this.setAdditionFields=function(fields,values){for(var i=0;i<fields.length;i++)if(3==fields[i].type)if(values[fields[i].users_field]&&"-1"!=values[fields[i].users_field])for(var j=0;j<fields[i].data.length;j++)fields[i].data[j].id==values[fields[i].users_field]&&(this[fields[i].users_field]=fields[i].data[j])
else this[fields[i].users_field]={id:-1,description:"LBL_UNKNOWN",user_field_id:fields[i].user_field_id}
else if(4==fields[i].type)if(this[fields[i].users_field]=[],values[fields[i].users_field]&&"String"==typeof values[fields[i].users_field])for(var j=0;j<fields[i].data.length;j++)null!=values[fields[i].users_field]&&-1!=values[fields[i].users_field].indexOf(fields[i].data[j].id+",")&&this[fields[i].users_field].push(fields[i].data[j])
else values[fields[i].users_field]&&(this[fields[i].users_field]=values[fields[i].users_field])
else 2==fields[i].type?values[fields[i].users_field]?this[fields[i].users_field]=values[fields[i].users_field]:(dateObj=new Date,this[fields[i].users_field]=dateObj.getDate()+"/"+(dateObj.getMonth()+1)+"/"+dateObj.getFullYear()):this[fields[i].users_field]=values[fields[i].users_field]}}function Message(sender_agent_id,type,content,time){this.messageType=type,this.content=content,this.senderAgent=sender_agent_id,this.fileName="",this.url="",this.send_time=time?new Date(time).toLocaleString():(new Date).getTime()}function LoginUser(){this.username="",this.email="",this.phone="",this.selectedService={},this.content="",this.setBasicInfo=function(name,email,phone){this.username=null==name?"":name,this.email=null==email?"":email,this.phone=null==phone?"":phone},this.setDefaultAdditionFieldsValue=function(fields){for(var i=0;i<fields.length;i++)this[fields[i].users_field+"_err"]=null,3==fields[i].type?this[fields[i].users_field]=-1:this[fields[i].users_field]=""},this.setAdditionFields=function(fields,values){for(var i=0;i<fields.length;i++)3==fields[i].type?this[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:-1:this[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:""},this.validateAdditionFields=function(fields){for(var valid=!0,i=0;i<fields.length;i++){var field=fields[i]
this[field.users_field+"_err"]=null,3==field.type||4==field.type?!field.required||null!=this[field.users_field]&&void 0!=this[field.users_field]&&-1!=this[field.users_field]&&""!=this[field.users_field]||(this[field.users_field+"_err"]="LBL_REQUIRED_INFO",valid=!1):(this[field.users_field]=this[field.users_field].trim(),!field.required||null!=this[field.users_field]&&void 0!=this[field.users_field]&&""!=this[field.users_field]?1==field.type&&isNaN(this[field.users_field])&&(this[field.users_field+"_err"]="LBL_INVALID_INFO",valid=!1):(this[field.users_field+"_err"]="LBL_REQUIRED_INFO",valid=!1))}return valid}}function UserInfo(){this.username="",this.email="",this.phone="",this.setBasicInfo=function(name,email,phone){this.username=null==name?"":name,this.email=null==email?"":email,this.phone=null==phone?"":phone},this.setAdditionFields=function(fields,values){for(var i=0;i<fields.length;i++)3==fields[i].type?this[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:-1:this[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:""},this.setDefaultAdditionFieldsValue=function(fields){for(var i=0;i<fields.length;i++)3==fields[i].type?this[fields[i].users_field]=-1:this[fields[i].users_field]=""},this.validateAdditionFields=function(fields){for(var valid=!0,i=0;i<fields.length;i++){var field=fields[i]
this[field.users_field+"_err"]=null,3==field.type||4==field.type?!field.required||null!=this[field.users_field]&&void 0!=this[field.users_field]&&-1!=this[field.users_field]&&""!=this[field.users_field]||(this[field.users_field+"_err"]="LBL_REQUIRED_INFO",valid=!1):(this[field.users_field]=this[field.users_field].trim(),!field.required||null!=this[field.users_field]&&void 0!=this[field.users_field]&&""!=this[field.users_field]?1==field.type&&isNaN(this[field.users_field])&&(this[field.users_field+"_err"]="LBL_INVALID_INFO",valid=!1):(this[field.users_field+"_err"]="LBL_REQUIRED_INFO",valid=!1))}return valid}}function InfoVisitor(){this.name="",this.email="",this.phone="",this.setBasicInfo=function(name,email,phone){this.name=name,this.email=email,this.phone=phone},this.setAdditionInfo=function(fields,values){for(var i=0;i<fields.length;i++)if(3==fields[i].type)this[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:-1
else if(4==fields[i].type){for(var str=",",j=0;j<values[fields[i].users_field].length;j++)str+=values[fields[i].users_field][j].id+","
this[fields[i].users_field]=str}else this[fields[i].users_field]=values[fields[i].users_field]?values[fields[i].users_field]:""}}function Comment(){this.content=""}function log(msg){if(showLog){var date=(new Date).toLocaleString()
console.log("%c["+date+"] ","color:blue",msg)}}function closeDivWhenClickingElsewhere(event,callbackOnClose,divId,e){var clickedElement=event.target
if(clickedElement){var clickedOnSearchDrawer=(clickedElement.id==divId||$(clickedElement).parents("#"+divId).size())&&!$(clickedElement).parents("#botMenu").size()
return null!=e&&(clickedOnSearchDrawer=clickedOnSearchDrawer||clickedElement==e.target),clickedOnSearchDrawer?void 0:void callbackOnClose()}}function isValidEmailAddress(emailAddress){var pattern=RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i)
return pattern.test(emailAddress)}function isValidPhoneNumber(phone){return/^0[0-9]{6,13}$/.test(phone)&&phone.length>=3&&phone.length<=20}function getParameterByName(key,queryString){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")
var regex=RegExp("[\\?&]"+key+"=([^&#]*)"),results=regex.exec(queryString)
return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function getCurrentDate(){return(new Date).toJSON().slice(0,10)}function gatherTriggerMsg(lstMsg){for(var lstTriggerMsg=[],i=0;i<lstMsg.length;i++)1==lstMsg[i].isTriggerMsg&&lstTriggerMsg.push(lstMsg[i])
return lstTriggerMsg}function isSafari(){var jqx=new $.jqx.response,browser=jqx.browser.name
return browser.toLowerCase().includes("safari")?!0:!1}function IFLocalStorage(){this.data={},this.setItem=function(key,payload){this.data[key]=payload
try{localStorage.setItem(key,payload)}catch(e){}},this.getItem=function(key){var dg=null
try{dg=localStorage.getItem(key)}catch(err){dg=this.data[key]?this.data[key]:null}return dg},this.removeItem=function(key){delete this.data[key]
try{localStorage.removeItem(key)}catch(e){}}}function IFSessionStorage(){this.data={},this.setItem=function(key,payload){this.data[key]=payload
try{sessionStorage.setItem(key,payload)}catch(e){}},this.getItem=function(key){var dg=null
try{dg=sessionStorage.getItem(key)}catch(err){dg=this.data[key]?this.data[key]:null}return dg},this.removeItem=function(key){delete this.data[key]
try{sessionStorage.removeItem(key)}catch(e){}}}var showLog=null,isFirstLogin=!1,surveyState=null
if("undefined"!=typeof WebPush)var webPush=new WebPush
var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPod|iPad/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}}
